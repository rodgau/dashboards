<!DOCTYPE html>
<html>
<head>
  <title>Dashboard &raquo; Main Sensors</title>
  <link rel="stylesheet" type="text/css" href="../../assets/lib/bootstrap/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../../assets/css/keen-dashboards.css" />
</head>
<body class="application">

  <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../">
          <span class="glyphicon glyphicon-chevron-left"></span>
        </a>
        <a class="navbar-brand" href="./">Layouts &raquo; Split Rows</a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-left">
          <li><a href="https://keen.io">Home</a></li>
          <li><a href="https://keen.io/team">Team</a></li>
          <li><a href="https://github.com/keenlabs/dashboards/tree/gh-pages/layouts/split-rows">Source</a></li>
          <li><a href="https://groups.google.com/forum/#!forum/keen-io-devs">Community</a></li><li><a href="http://stackoverflow.com/questions/tagged/keen-io?sort=newest&pageSize=15">Technical Support</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="container-fluid">

    <div class="row">
      <div class="col-sm-3">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
              <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-9">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
              <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-3">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage" id="chart-02b">
              //<img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-9">
        <div class="chart-wrapper">
          <div class="chart-title">
            (drag area to zoom-in, right-click to reset)
          </div>
          <div class="chart-stage" id="chart-02">
              //<img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Auto-refreshes every 30 seconds.
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-3">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
              <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-9">
        <div class="chart-wrapper">
          <div class="chart-title">
            (drag area to zoom-in, right-click to reset)
          </div>
          <div class="chart-stage" id="chart-03">
              //<img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Auto-refreshes every 30 seconds.
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-3">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
              <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-9">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
              <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
    </div>


    <hr>

    <p class="small text-muted">Built with &#9829; by <a href="https://keen.io">Keen IO</a></p>

  </div>

  <script type="text/javascript" src="../../assets/lib/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="../../assets/lib/bootstrap/dist/js/bootstrap.min.js"></script>

  <script type="text/javascript" src="../../assets/lib/holderjs/holder.js"></script>
  <script>
    Holder.add_theme("white", { background:"#fff", foreground:"#a7a7a7", size:10 });
  </script>

  <script type="text/javascript" src="../../assets/lib/keen-js/dist/keen.min.js"></script>
  <script type="text/javascript" src="../../assets/js/meta.js"></script>

	<script type="text/javascript">

		var client = new Keen({
			projectId: "53e30cc333e4061149000003",
			readKey: "86e4bf9a678cace2f791e78efdb7b0e075c769fa26c67f6768a71111a972fc154c784e8a92871722bc8e020f29333a6e7758dda21884dfb146d230481a6e243842056e5c966611cb6f95bb6f290d298f65ccefb032dae704557b35ee42c9767dfb8064ec104321d56ef2c6205a915fa0"
			
		});

		Keen.ready(function(){
			
			var remoteCurrent = new Keen.Query("average", {
				eventCollection: "Test 2",
				targetProperty: "RemoteSensor1.temp",
				timeframe: "this_1_minutes",
				timezone: "UTC"
			});			
			var boardCurrent = new Keen.Query("average", {
				eventCollection: "Test 2",
				targetProperty: "BoardSensor1.temp",
				timeframe: "this_1_minutes",
				timezone: "UTC"
			});			
			var remote = new Keen.Query("average", {
				eventCollection: "Test 2",
				interval: "minutely",
				targetProperty: "RemoteSensor1.temp",
				timeframe: "this_60_minutes",
				timezone: "UTC"
			});
			var board = new Keen.Query("average", {
				eventCollection: "Test 2",
				interval: "minutely",
				targetProperty: "BoardSensor1.temp",
				timeframe: "this_60_minutes",
				timezone: "UTC"
			});
			
			var chart1 = new Keen.Dataviz()
				.el(document.getElementById("chart-02"))
				.chartType("linechart");
			var chart1b = new Keen.Dataviz()
				.el(document.getElementById("chart-02b"))
				.chartType("metric")
				.title("Remote °C")
				.colors: ["#49c5b1"];
			var chart2 = new Keen.Dataviz()
				.el(document.getElementById("chart-03"))
				.chartType("linechart");
				
		//chart.attributes used for keen's chart settings (over-rides Google API)
		chart1.attributes({
				title: "Remote Sensor Temperature, °C",
				//width: 900,
				//height: 450,
				titlePosition: 'out',
				titleTextStyle: {
						color: 'black',
						fontSize: 20
				}
		});
		//chart.chartOptions passes args directly to Google Charts API (or C3/Charts.js)
		chart1.chartOptions({
				vAxis: {
						minValue: 20,
			maxValue: 45,
						minorGridlines: {
								count: 5
						}
				},
				explorer: {
						actions: ['dragToZoom', 'rightClickToReset'] 
				}
		});
		chart2.attributes({
				title: "Board Sensor Temperature, °C",
				//width: 900,
				//height: 450,
				titlePosition: 'out',
				titleTextStyle: {
						color: 'black',
						fontSize: 20
				}
		});
		//chart.chartOptions passes args directly to Google Charts API (or C3/Charts.js)
		chart2.chartOptions({
				vAxis: {
						minValue: 20,
			maxValue: 45,
						minorGridlines: {
								count: 5
						}
				},
				explorer: {
						actions: ['dragToZoom', 'rightClickToReset'] 
				}
		});

		// start spinners
		chart1.prepare();
		chart1b.prepare();
		chart2.prepare();

		var req1 = client.run(remote, function(err, res){
			if (err) {
				// Display the API error
				chart1.error(err.message);
			}
			else {
				// Handle the response
				chart1
					.parseRequest(this)
					.render();
			}
		});
		var req1b = client.run(remoteCurrent, function(err, res){
			if (err) {
				// Display the API error
				chart1b.error(err.message);
			}
			else {
				// Handle the response
				chart1b
					.parseRequest(this)
					.render();
			}
		});
		var req2 = client.run(board, function(err, res){
			if (err) {
				// Display the API error
				chart2.error(err.message);
			}
			else {
				// Handle the response
				chart2
					.parseRequest(this)
					.render();
			}
		});

		// Re-run and refresh every half minute...
		setInterval(function() {
			req1.refresh();
			req1b.refresh();
			req2.refresh();
		}, 1000 * 60 * 0.5);
		
	});

	</script>
	
</body>
</html>
